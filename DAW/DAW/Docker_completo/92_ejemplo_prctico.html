<!doctype html>
<html lang="es">
<head>
<link rel="stylesheet" type="text/css" href="base.css" />
<link rel="stylesheet" type="text/css" href="content.css" />
<link rel="stylesheet" type="text/css" href="nav.css" />
<meta http-equiv="content-type" content="text/html;  charset=utf-8" />
<title>9.2 Ejemplo práctico | 1.Introducción. Docker para desarrolladores </title>
<link rel="shortcut icon" href="favicon.ico" type="image/x-icon" />
<meta name="author" content="Juan Diego Pérez Jiménez para la Consejería de Educación" />
<link rel="license" type="text/html" href="http://creativecommons.org/licenses/by-sa/4.0/" />
<meta name="generator" content="eXeLearning 2.7 - exelearning.net" />
<!--[if lt IE 9]><script type="text/javascript" src="exe_html5.js"></script><![endif]-->
<script type="text/javascript" src="exe_jquery.js"></script>
<script type="text/javascript" src="common_i18n.js"></script>
<script type="text/javascript" src="common.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
</head>
<body class="exe-web-site" id="exe-node-140"><script type="text/javascript">document.body.className+=" js"</script>
<div id="content">
<p id="skipNav"><a href="#main" class="sr-av">Saltar la navegación</a></p>
<header id="header" ><div id="headerContent">1.Introducción. Docker para desarrolladores</div></header>
<nav id="siteNav">
<ul>
   <li><a href="index.html" class="daddy main-node">Docker para desarrolladores</a></li>
   <li><a href="1introduccin_docker_para_desarrolladores.html" class="daddy">1.Introducción. Docker para desarrolladores</a>
   <ul class="other-section">
      <li><a href="11_qu_es_docker.html" class="no-ch">1.1 ¿Qué es Docker?</a></li>
      <li><a href="12_instalacin_de_docker.html" class="no-ch">1.2 Instalación de Docker</a></li>
      <li><a href="13_hola_mundo.html" class="no-ch">1.3 Hola Mundo</a></li>
      <li><a href="14_qu_es_docker_hub.html" class="no-ch">1.4 ¿Qué es Docker Hub?</a></li>
      <li><a href="15_aplicaciones_a_la_docencia.html" class="no-ch">1.5 Aplicaciones a la docencia</a></li>
      <li><a href="16_estructura_del_resto_del_curso.html" class="no-ch">1.6 Estructura del resto del curso</a></li>
      <li><a href="crditos.html" class="no-ch">Créditos</a></li>
   </ul>
   </li>
   <li><a href="2_ejecutando_y_gestionando_contenedores_docker.html" class="daddy">2. Ejecutando y gestionando contenedores Docker</a>
   <ul class="other-section">
      <li><a href="21_ejecutando_contenedores.html" class="no-ch">2.1 Ejecutando contenedores.</a></li>
      <li><a href="22_los_flags_it.html" class="no-ch">2.2 Los flags -it</a></li>
      <li><a href="23_ejecucin_de_servicios_puertos_y_variables_de_entorno.html" class="no-ch">2.3 Ejecución de servicios. Puertos y variables de entorno</a></li>
      <li><a href="24_asignando_nombre_a_los_contenedores.html" class="no-ch">2.4 Asignando nombre a los contenedores</a></li>
      <li><a href="25_ejecutar_rdenes_en_los_contenedores.html" class="no-ch">2.5 Ejecutar órdenes en los contenedores.</a></li>
      <li><a href="26_obtencin_de_informacin_de_los_contenedores.html" class="no-ch">2.6 Obtención de información de los contenedores</a></li>
      <li><a href="27_gestin_de_contenedores.html" class="no-ch">2.7 Gestión de contenedores</a></li>
      <li><a href="28_vdeo_resumen.html" class="no-ch">2.8. Vídeo resumen</a></li>
      <li><a href="crditos0.html" class="no-ch">Créditos</a></li>
   </ul>
   </li>
   <li><a href="3_gestin_de_imgenes_docker.html" class="daddy">3. Gestión de imágenes docker</a>
   <ul class="other-section">
      <li><a href="31_descarga_de_imgenes.html" class="no-ch">3.1 Descarga de imágenes</a></li>
      <li><a href="32_borrado_de_imgenes.html" class="no-ch">3.2 Borrado de imágenes</a></li>
      <li><a href="33_obteniendo_informacin_de_las_imgenes.html" class="no-ch">3.3 Obteniendo información de las imágenes</a></li>
      <li><a href="34_ms_comandos_relacionados_con_imgenes.html" class="no-ch">3.4 Más comandos relacionados con imágenes</a></li>
      <li><a href="34_vdeo_resumen.html" class="no-ch">3.4 Vídeo resumen</a></li>
      <li><a href="crditos1.html" class="no-ch">Créditos</a></li>
   </ul>
   </li>
   <li><a href="4_persistencia_en_docker.html" class="daddy">4. Persistencia en docker</a>
   <ul class="other-section">
      <li><a href="41_los_datos_en_los_contenedores.html" class="no-ch">4.1 Los datos en los contenedores</a></li>
      <li><a href="42_volmenes_y_bind_mount.html" class="no-ch">4.2 Volúmenes y Bind Mount</a></li>
      <li><a href="43_gestionando_volmenes_y_obteniendo_informacin.html" class="no-ch">4.3 Gestionando volúmenes y obteniendo información</a></li>
      <li><a href="44_asociando_almacenamiento_a_los_contenedores.html" class="no-ch">4.4 Asociando almacenamiento a los contenedores</a></li>
      <li><a href="45_herramientas_docker_en_visual_studio_code.html" class="no-ch">4.5 Herramientas Docker en Visual Studio Code</a></li>
      <li><a href="46_uso_de_los_volmenes_y_bind_mounts.html" class="no-ch">4.6 Uso de los volúmenes y bind mounts</a></li>
      <li><a href="47_bind_mounts_para_desarrollo_depurando_aplicaciones.html" class="no-ch">4.7 Bind mounts para desarrollo. Depurando aplicaciones</a></li>
      <li><a href="crditos2.html" class="no-ch">Créditos</a></li>
   </ul>
   </li>
   <li><a href="5_redes_en_docker.html" class="daddy">5. Redes en docker</a>
   <ul class="other-section">
      <li><a href="51_tipos_de_redes_en_docker.html" class="no-ch">5.1 Tipos de redes en Docker</a></li>
      <li><a href="52_gestionando_redes.html" class="no-ch">5.2 Gestionando redes</a></li>
      <li><a href="53_obteniendo_informacin_de_las_redes.html" class="no-ch">5.3 Obteniendo información de las redes</a></li>
      <li><a href="54_asociando_redes_a_contenedores.html" class="no-ch">5.4 Asociando redes a contenedores</a></li>
      <li><a href="55_iptables_en_contenedores.html" class="no-ch">5.5 Iptables en contenedores</a></li>
      <li><a href="56_vdeo_resumen.html" class="no-ch">5.6 Vídeo resumen</a></li>
      <li><a href="crditos3.html" class="no-ch">Créditos</a></li>
   </ul>
   </li>
   <li><a href="6_construyendo_mis_propias_imgenes.html" class="daddy">6. Construyendo mis propias imágenes</a>
   <ul class="other-section">
      <li><a href="61_desde_un_contenedor_en_ejecucin.html" class="no-ch">6.1 Desde un contenedor en ejecución</a></li>
      <li><a href="62_el_fichero_dockerfile.html" class="daddy">6.2 El fichero Dockerfile</a>
      <ul class="other-section">
         <li><a href="621_resumen_de_comandos_dockerfile.html" class="no-ch">6.2.1 Resumen de comandos Dockerfile</a></li>
         <li><a href="622_ejemplos_de_ficheros_dockerfile.html" class="no-ch">6.2.2 Ejemplos de ficheros Dockerfile</a></li>
         <li><a href="623_buenas_prcticas_para_ficheros_dockerfile.html" class="daddy">6.2.3 Buenas prácticas para ficheros Dockerfile</a>
         <ul class="other-section">
            <li><a href="__.html" class="no-ch">?????</a></li>
         </ul>
         </li>
      </ul>
      </li>
      <li><a href="63_conectando_github_con_dockerhub.html" class="no-ch">6.3 Conectando Github con DockerHub</a></li>
      <li><a href="crditos4.html" class="no-ch">Créditos</a></li>
   </ul>
   </li>
   <li><a href="7_aplicaciones_multicapa_con_dockercompose.html" class="daddy">7. Aplicaciones multicapa con docker-compose</a>
   <ul class="other-section">
      <li><a href="71_instalacin_de_dockercompose.html" class="no-ch">7.1 Instalación de docker-compose</a></li>
      <li><a href="72_el_archivo_dockercomposeyml.html" class="no-ch">7.2 El archivo docker-compose.yml</a></li>
      <li><a href="73_la_orden_dockercompose.html" class="no-ch">7.3 La orden docker-compose</a></li>
      <li><a href="74_aplicaciones_a_la_docencia_entornos_de_prcticas.html" class="no-ch">7.4 Aplicaciones a la docencia. Entornos de prácticas.</a></li>
      <li><a href="75_publicacin_de_archivos_dockercompose_en_dockerhub.html" class="no-ch">7.5 Publicación de archivos docker-compose en DockerHub</a></li>
      <li><a href="76_recursos_utilizados.html" class="no-ch">7.6 Recursos utilizados</a></li>
      <li><a href="crditos5.html" class="no-ch">Créditos</a></li>
   </ul>
   </li>
   <li><a href="8_asegurando_contenedores.html" class="daddy">8. Asegurando contenedores</a>
   <ul class="other-section">
      <li><a href="81_seguridad_en_las_imgenes.html" class="no-ch">8.1 Seguridad en las imágenes</a></li>
      <li><a href="82_seguridad_en_el_proceso_de_build.html" class="no-ch">8.2 Seguridad en el proceso de build</a></li>
      <li><a href="83_seguridad_al_arrancar_los_contenedores.html" class="no-ch">8.3 Seguridad al arrancar los contenedores</a></li>
      <li><a href="84_video_resumen.html" class="no-ch">8.4 Video Resumen</a></li>
      <li><a href="crditos6.html" class="no-ch">Créditos</a></li>
   </ul>
   </li>
   <li class="current-page-parent"><a href="9_integracin_y_despliegue_continuo_con_jenkins_y_docker.html" class="current-page-parent daddy">9. Integración y despliegue continuo con Jenkins y docker</a>
   <ul>
      <li><a href="91_conceptos_importantes.html" class="no-ch">9.1 Conceptos importantes</a></li>
      <li id="active"><a href="92_ejemplo_prctico.html" class="active no-ch">9.2 Ejemplo práctico</a></li>
      <li><a href="recursos.html" class="no-ch">Recursos</a></li>
      <li><a href="crditos7.html" class="no-ch">Créditos</a></li>
   </ul>
   </li>
</ul>
</nav>
<div id='topPagination'>
<nav class="pagination noprt">
<a href="91_conceptos_importantes.html" class="prev"><span><span>&laquo; </span>Anterior</span></a> <span class="sep">| </span><a href="recursos.html" class="next"><span>Siguiente<span> &raquo;</span></span></a>
</nav>
</div>
<div id="main-wrapper">
<section id="main">
<header id="nodeDecoration"><h1 id="nodeTitle">9.2 Ejemplo práctico</h1></header>
<article class="iDevice_wrapper textIdevice" id="id317">
<div class="iDevice emphasis0" >
<div id="ta317_116_2" class="block iDevice_content">
<div class="exe-text"><p>Para finalizar, tal y como habíamos anunciado en el primer apartado de este tema,  vamos a realizar una práctica que cubra muchos de los aspectos que hemos visto a lo largo del curso y que introduzca ideas y conceptos relacionados con la unión de los contenedores y de los procesos de integración (CI) , entrega (CD) y despliegue continuo (CDep). El proceso no es exactamente de ese tipo de procesos, es un proyecto "ad-hoc" para mis clases pero nos va a ayudar a pensar en automatización de procesos.</p>
<p>Es una práctica voluntaria, puede resultar compleja, pero el objetivo es vislumbrar  el mundo de posibilidades que nos abre el uso de las tecnologías vistas. Todos los archivos necesarios serán proporcionados. Nuestro objetivo va a ser un automatizar el siguiente proceso:</p>
<figure class="exe-figure exe-image position-center license-pd" style="width: 800px; text-align: center;"><img src="Jenkins_Pipelin.png" alt="Pipeline de Jenkins - Pseudo CDep" title="Pipeline de Jenkins - Pseudo CDep" width="800" height="732" />
<figcaption class="figcaption"><a href="http://github.com/pekechis" target="_blank" class="author" rel="noopener">Juan Diego Pérez Jiménez</a>. <span class="title"><em>Pipeline de Jenkins - Pseudo CDep</em></span> <span class="license"><span class="sep">(</span><span>Dominio público</span><span class="sep">)</span></span></figcaption>
</figure>
<p><span style="text-decoration: underline;"><strong>PASOS DEL PROCESO</strong></span></p>
<p><span style="text-decoration: underline;"></span>Los pasos del proceso son los pasos del Pipeline de Jenkins y serán:</p>
<ol>
<li><strong>BUILD: </strong>Descargar el código del ejemplo y compilarlo.</li>
<li><strong>TESTS: </strong>Realizar los Test. En este ejemplo se deja vacío para no complicar más las cosas. Si nuestro proyecto tuviera pruebas sería el lugar para ejecutarlas.</li>
<li><strong>CONTAINER: </strong>Clonaremos el repositorio de Github donde tengo el Dockerfile y tras añadir el fichero resultante de la compilación se hará un push. Este repositorio estará conectado a su vez con un repositorio de DockerHub que será el que haga el build de manera automática.</li>
<li><strong>DEPLOY: </strong>Pondremos el archivo en un contenedor Tomcat al que accederemos por SSH.</li>
</ol>
<p><span style="text-decoration: underline;"><strong>RECURSOS NECESARIOS</strong></span></p>
<p>Vamos a necesitar los siguiente recursos:</p>
<ul>
<li>Un contenedor de la imagen jenkins/jenkins:lts que lanzaremos con el siguiente comando docker. En ese contenedor instalaremos la herramienta Maven y los plugins Maven Integration y SSH Pipeline Steps.</li>
</ul>
<table style="width: 100%; background-color: #000000;" border="0">
<tbody>
<tr>
<td style="width: 100%;"><span style="font-size: 14pt; color: #00ff00;">docker run -d --name serverJenkins -p 9393:8080 -p 50001:50000 jenkins/jenkins:lts</span></td>
</tr>
</tbody>
</table>
<ul>
<li>Un contenedor de la imagen jperjim398/tomcatcursocep que contiene un servidor Tomcat y un servidor SSH que usaremos para conectarnos y desplegar la aplicación en el servidor Tomcat. Lanzaremos este contenedor con la siguiente orden docker.</li>
</ul>
<table style="width: 100%; background-color: #000000;" border="0">
<tbody>
<tr>
<td style="width: 100%;"><span style="font-size: 14pt; color: #00ff00;">docker run -d -it --name cep -p 9292:8080 -p 2222:22 jperjim398/tomcatcursocep</span></td>
</tr>
</tbody>
</table>
<ul>
<li>El código de la aplicación del ejemplo que se puede encontrar aquí: <a href="https://github.com/jleetutorial/maven-project">https://github.com/jleetutorial/maven-project</a></li>
</ul>
<ul>
<li>Un repositorio en github que tenga inicialmente el siguiente Dockerfile.</li>
</ul>
<table style="width: 100%; background-color: #000000;" border="0">
<tbody>
<tr>
<td style="width: 100%;">
<p><span style="font-size: 14pt; color: #00ff00;">FROM tomcat:9.0.39-jdk11</span></p>
<p><span style="font-size: 14pt; color: #00ff00;">COPY *.war /user/local/tomcat/webapps</span></p>
</td>
</tr>
</tbody>
</table>
<ul>
<li>Un repositorio en DockerHub conectado  con el repositorio anterior.</li>
</ul>
<ul>
<li>El fichero <a href="https://gist.github.com/pekechis/f8c682c4079457e22faf638b2279db72" target="_blank" rel="noopener">Jenkinsfile</a> que define el Pipeline.</li>
</ul>
<p>
<script src="https://gist.github.com/pekechis/f8c682c4079457e22faf638b2279db72.js"></script>
</p>
<p></p></div>
</div>
</div>
</article>
<article class="iDevice_wrapper textIdevice" id="id318">
<div class="iDevice emphasis0" >
<div id="ta318_118_2" class="block iDevice_content">
<div class="exe-text"><p><iframe width="1280" height="720" src="https://www.youtube.com/embed/qEZx4mQzTd4?list=PL-8CyWabyNa85xowmOeBMCspbrn6qNWgl" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen="allowfullscreen"></iframe></p></div>
</div>
</div>
</article>
<div id="packageLicense" class="cc cc-by-sa">
<p><span>Obra publicada con</span> <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/">Licencia Creative Commons Reconocimiento Compartir igual 4.0</a></p>
</div>
</section>
</div>
<div id='bottomPagination'>
<nav class="pagination noprt">
<a href="91_conceptos_importantes.html" class="prev"><span><span>&laquo; </span>Anterior</span></a> <span class="sep">| </span><a href="recursos.html" class="next"><span>Siguiente<span> &raquo;</span></span></a>
</nav>
</div>
</div>
<script type="text/javascript" src="_intef_js.js"></script></body></html>