<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>Estructura ficheros, código</title>
    <link href="css/prism.css" rel="stylesheet" />
    <link rel="stylesheet" href="css/style.css" />
    <script src="lib/prism.js"></script>
  </head>
  <body>
    <header class="super-cabecera">
      <nav>
        <ul>
          <li>
            <a href="../../">
              <i class="fa fa-fw fa-home fa-5x"></i>
              <span class="borde"></span>
              <span class="texto">VOLVER</span>
            </a>
          </li>
        </ul>
      </nav>
    </header>
    <main>
      <article>
        <h1>Configuración y Funcion</h1>
        <p>
          En esta sección se explica la estructura de ficheros y el código de la
          aplicación de config.php
        </p>
        <p>
          El siguiente código muestra la estructura del fichero de configuración
          en el cual se encuentra la función de exploración de las carpetas y el
          listado de estas.
        </p>
        <h4>config.php</h4>
        <pre class="line-numbers"><code class="language-php">&lt;?php
function obtener_estructura_directorios($ruta)
{
    // Se comprueba que realmente sea la ruta de un directorio
    if (is_dir($ruta)) {
        // Abre un gestor de directorios para la ruta indicada
        $gestor = opendir($ruta);
        echo "&lt;ul>";

        // Recorre todos los elementos del directorio
        while (($carpeta = readdir($gestor)) !== false) {

            $ruta_completa = $ruta . "/" . $carpeta;

            // Se muestran todas las carpetas excepto ".", "..",".git","config","css","lib","icon","js","img","fonts","assets","data","doc,"app" y "vendor" 
            if (
                is_dir($ruta_completa)
                && $carpeta != "."
                && $carpeta != ".."
                && $carpeta != "js"
                && $carpeta != "css"
                && $carpeta != "lib"
                && $carpeta != "img"
                && $carpeta != "doc"
                && $carpeta != "app"
                && $carpeta != "App"
                && $carpeta != "src"
                && $carpeta != ".git"
                && $carpeta != "icon"
                && $carpeta != "data"
                && $carpeta != "dist"
                && $carpeta != "views"
                && $carpeta != "video"
                && $carpeta != "fonts"
                && $carpeta != ".vite"
                && $carpeta != "config"
                && $carpeta != "assets"
                && $carpeta != "my-app"
                && $carpeta != "vendor"
                && $carpeta != "public"
                && $carpeta != "iconos"
                && $carpeta != "script"
                && $carpeta != ".github"
                && $carpeta != "include"
                && $carpeta != "scripts"
                && $carpeta != ".vscode"
                && $carpeta != "modules"
                && $carpeta != "webfonts"
                && $carpeta != "imagenes"
                && $carpeta != "capturas"
                && $carpeta != "node_modules"
            ) {
                echo "&lt;li class='lilista'>&lt;a class ='alista'href='$ruta_completa'>&lt;span class='spanlista'>$carpeta&lt;/span>&lt;/a>&lt;/li>";
                obtener_estructura_directorios($ruta_completa);
            }
        }

        // Cierra el gestor de directorios
        closedir($gestor);
        echo "&lt;/ul>";
    } else {
        echo "No es una ruta de directorio valida<br/>";
    }
}

</code></pre>
      </article>
      <article>
        <h1>Ejecucion de la funcion</h1>
        <p>
          El siguiente código muestra como se ejecuta la función de exploración
          de las carpetas y el listado de estas.
        </p>
        <h1>Mostrar carpetas</h1>
        <pre
          class="line-numbers"
        ><code class="language-php">//incluimos el fichero de funciones
include "/..Ruta al config.php../config.php";
// llama a la funcion y le damos la ruta . que es la actual
obtener_estructura_directorios(".");
</code></pre>
      </article>
    </main>
  </body>
</html>
